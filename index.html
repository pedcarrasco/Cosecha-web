<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Registro de Cosecha</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- Modo oscuro -->
<button id="btnDark" class="btn-darkmode">Modo Oscuro</button>

<h1 class="titulo">Registro de Cosecha</h1>

<div class="card">
    <form id="cosechaForm">

        <div class="fila">
            <label>Fecha:</label>
            <input type="date" id="fecha" required>
        </div>

        <div class="fila">
            <label>Sector:</label>
            <input type="text" id="sector" list="listaSectores" placeholder="Ej: Cuartel 12" required>
            <datalist id="listaSectores">
                <option value="Cuartel 1">
                <option value="Cuartel 2">
                <option value="Cuartel 3">
                <option value="Cuartel 4">
                <option value="Cuartel 5">
                <option value="Cuartel 6">
                <option value="Cuartel 7">
                <option value="Cuartel 8">
                <option value="Cuartel 9">
                <option value="Cuartel 10">
                <option value="Cuartel 11">
                <option value="Cuartel 12">
                <option value="Sector Norte">
                <option value="Sector Sur">
                <option value="Sector Este">
                <option value="Sector Oeste">
                <option value="Lote A">
                <option value="Lote B">
                <option value="Lote C">
                <option value="Lote D">
                <option value="Lote E">
                <option value="Lote F">
            </datalist>
        </div>

        <hr>

        <h2 class="subtitulo">Exportaci√≥n</h2>

        <div class="fila">
            <label>Variedad:</label>
            <select id="variedadExport">
                <option value="Hass">Hass</option>
                <option value="Edranol">Edranol</option>
            </select>
        </div>

        <div class="fila">
            <label>Cantidad (bins):</label>
            <input type="number" id="cantidadExport" min="0" required>
        </div>

        <hr>

        <h2 class="subtitulo">Descarte</h2>

        <div class="fila">
            <label>Tipo de Descarte:</label>
            <select id="tipoDescarte">
                <option value="">Seleccione</option>
                <option value="Hass">Hass</option>
                <option value="Edranol">Edranol</option>
                <option value="Surtida">Surtida</option>
            </select>
        </div>

        <div id="filaDescarte1" class="fila oculto">
            <label>Variedad:</label>
            <select class="variedadDescarte">
                <option value="Hass">Hass</option>
            </select>
            <input type="number" class="cantidadDescarte" placeholder="Cantidad Hass (bins)" min="0">
        </div>

        <div id="filaDescarte2" class="fila oculto">
            <label>Variedad:</label>
            <select class="variedadDescarte">
                <option value="Edranol">Edranol</option>
            </select>
            <input type="number" class="cantidadDescarte" placeholder="Cantidad Edranol (bins)" min="0">
        </div>

        <hr>

        <div class="fila">
            <label>Notas / Comentarios:</label>
            <textarea id="notas" placeholder="Ej: viento fuerte, golpes, fruta muy buena..." rows="3"></textarea>
        </div>

        <div class="fila">
            <label>Total (autom√°tico):</label>
            <input type="text" id="totalPreview" disabled>
        </div>

        <button class="btn-guardar" type="submit">Guardar</button>

    </form>
</div>

<div id="mensajeExito" class="mensaje oculto">‚úÖ Guardado correctamente</div>

<h2 class="subtitulo">Registros</h2>

<!-- FILTROS -->
<div class="card">
    <h3>Filtrar por fechas</h3>
    <label>Desde:</label>
    <input type="date" id="fechaInicio">

    <label>Hasta:</label>
    <input type="date" id="fechaFin">

    <button id="btnFiltrarFecha" class="btn-guardar">Aplicar Filtro</button>
    <button id="btnLimpiarFiltro" class="btn-borrar">Limpiar Filtros</button>
</div>

<!-- Buscador -->
<input type="text" id="buscar" placeholder="Buscar por sector, variedad o fecha..." class="buscar">

<table id="tablaCosecha">
    <thead>
        <tr>
            <th>Fecha</th>
            <th>Sector</th>
            <th>Export</th>
            <th>Bins Export</th>
            <th>Descarte</th>
            <th>Total Bins</th>
            <th>Notas</th>
            <th>Acci√≥n</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>

<button id="borrarTodo" class="btn-borrar">üóëÔ∏è Borrar Historial Completo</button>

<div class="card totales">
    <p>Total Exportaci√≥n: <span id="totalExportacion">0</span></p>
    <p>Total Descarte: <span id="totalDescarte">0</span></p>
    <p>Total General: <span id="totalGeneral">0</span></p>
    <p>% Exportaci√≥n: <span id="porcExportacion">0%</span></p>
    <p>% Descarte: <span id="porcDescarte">0%</span></p>
    <p>% Descarte Hass: <span id="porcHass">0%</span></p>
    <p>% Descarte Edranol: <span id="porcEdranol">0%</span></p>
</div>

<div class="grafico-container card">
    <h3 class="titulo-grafico">üìä Exportaci√≥n vs Descarte</h3>
    <canvas id="graficoTorta" width="300" height="300"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="script.js"></script>
</body>
</html>
